<odoo>
	<data>
		<record model="ir.ui.view" id="account_invoice_form">
        <field name="name">Account Invoice</field>
        <field name="model">account.move</field>
		<field name="inherit_id" ref="account.view_move_form"/>
		<field name="arch" type="xml">
			<xpath expr="//notebook" position="inside">
					<page string="Budgeting Tab" name="budget_info">
						<separator string="Assigned Vendor/User"/>
						<field name="inv_budget_line" >
						<tree string="Fixed Budget Line" editable="bottom" create="0">
                                <field name="product_id_budget" readonly="1" options="{'no_edit': True, 'no_create': True}"/>
                                <field name="name" readonly="1"/>
                                <field name="bucket_type_id" readonly="1" options="{'no_edit': True, 'no_create': True}"/>
                                <field name="bucket_user" invisible="1"/>
                                <field name="assignable_status" readonly="1"/>
                                <field name="budget_inv_vendor_ids" attrs="{'readonly': ['|',('bucket_user', '!=', 'vendor'),('assignable_status', 'in', ('unassigned','assigned'))],}" options="{'no_edit': True, 'no_create': True}" widget="many2many_tags"/>
                                <field name="budget_user_ids" attrs="{'readonly': ['|','|',('bucket_user', '=', 'vendor'),('assignable_status', 'in', ('unassigned','assigned')),('assignable_status', 'not in', ('unassigned','assigned','assignable_at_inv'))],}" options="{'no_edit': True, 'no_create': True}" widget="many2many_tags"/>
                                <field name="prod_priority" readonly="1"/>
                                <field name="amount" readonly="1"/>
                                
                                    
                            </tree>
                        </field>
						
						
						
						<field name="product_remaining_budget_line" widget="section_and_note_one2many" mode="tree">
							<tree string="Remaining Budget line" editable="bottom">
								<field name="product_id_budget" readonly="1" options="{'no_edit': True, 'no_create': True}"/>
								<field name="name" readonly="1"/>
								<field name="bucket_type_id" readonly="1" options="{'no_edit': True, 'no_create': True}"/>
								<field name="bucket_user" invisible="1"/>
								<field name="assignable_status" readonly="1"/>
								<field name="budget_inv_remaining_vendor_ids" attrs="{'readonly': ['|',('bucket_user', '!=', 'vendor'),('assignable_status', 'in', ('unassigned','assignable_at_inv'))],}" options="{'no_edit': True, 'no_create': True}" widget="many2many_tags"/>
                                <field name="budget_remaining_user_ids" attrs="{'readonly': ['|',('bucket_user', '=', 'vendor'),('assignable_status', 'in', ('unassigned','assignable_at_inv'))],}" options="{'no_edit': True, 'no_create': True}" widget="many2many_tags"/>
								<field name="allocate_percent" readonly="1"/>
								<field name="amount" readonly="1"/>
							</tree>
						</field>
					</page>
                </xpath>
		</field>
        </record>
    </data>
</odoo>